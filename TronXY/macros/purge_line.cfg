[gcode_macro PURGE_LINE]
gcode:
    {% set x_max = printer.toolhead.axis_maximum.x|float %}
    {% set x_min = printer.toolhead.axis_minimum.x|float %}
    {% set y_min = printer.toolhead.axis_minimum.y|float %}
    
    {% set start_x = x_min + 5 %}
    {% set end_x = x_max / 2 %}
    {% set y_pos = y_min + 5 %}
    
    {% if "x" in printer.toolhead.homed_axes and "y" in printer.toolhead.homed_axes %}
        
    {% else %}
        G28
    {% endif %}
        G90 ; Use absolute coordinates
        G1 Z0.2 F600
        G1 Y{y_pos} F1000
        G1 X{start_x} E9 F1000 ; intro line
        G1 X{end_x} E18.75 F1000 ; intro line